{% extends 'base.html' %}

{% block content %}
    <h1>Change profile data</h1>
    <form id="form" action="{% url 'user_profile' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <p>first_name: {{ form.first_name }}</p>
        <p>last_name: {{ form.last_name }}</p>
        <p>userpic image: {{ form.userpic_img }}</p>
        <p>userpic: {{ form.userpic }}</p>
        <button type="submit">Change</button>
    </form>

    <script>
        $('body').on('submit', '#form', function() {
            $.ajax({
                type: $(this).attr('method'),
                url: $(this).attr('action'),
                data: $(this).serialize(),
                dataType: 'json',
                enctype: 'multipart/form-data',
                success: function(response){
                    console.log(response);
                },
                error: function (response, request) {
                    console.log(response);
                }
            });
            return false;
        });
    </script>

{% endblock content %}
